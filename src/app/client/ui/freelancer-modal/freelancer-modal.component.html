<div class="p-5">
  <h1 mat-dialog-title class="font-[Lato]">
    {{ data?.title ?? "Add New Freelancer" }}
  </h1>
  <div mat-dialog-content class="pt-5">
    <form class="form" [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-2 gap-4">
        <div class="">
          <input
            type="text"
            placeholder="name"
            class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
            formControlName="name"
          />
          <div
            *ngIf="
              userForm.controls.name.invalid &&
              (userForm.controls.name.touched || userForm.controls.name.dirty)
            "
          >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.name.errors?.['required']"
            >
              Please enter your name</small
            >
          </div>
        </div>
        <div class="">
          <input
            type="text"
            placeholder="username"
            class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
            formControlName="username"
          />
          <div
            *ngIf="
              userForm.controls.username.invalid &&
              (userForm.controls.username.touched ||
                userForm.controls.username.dirty)
            "
          >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.username.errors?.['required']"
            >
              Please enter your username</small
            >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.username.errors?.['minlength']"
            >
              The minimum length for username must be greater than 5
            </small>
          </div>
        </div>
        <div class="">
          <input
            type="email"
            placeholder="email"
            class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
            formControlName="email"
          />
          <div
            *ngIf="
              userForm.controls.email.invalid &&
              (userForm.controls.email.touched || userForm.controls.email.dirty)
            "
          >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.email.errors?.['required']"
            >
              Please enter your email</small
            >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.email.errors?.['email']"
            >
              Please enter your email in a correct format</small
            >
          </div>
        </div>
        <div class="">
          <input
            type="text"
            placeholder="phone number"
            class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
            formControlName="phoneNum"
            digitOnly
          />
          <div
            *ngIf="
              userForm.controls.phoneNum.invalid &&
              (userForm.controls.phoneNum.touched ||
                userForm.controls.phoneNum.dirty)
            "
          >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.phoneNum.errors?.['required']"
            >
              Please enter your phone number</small
            >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.phoneNum.errors?.['pattern']"
            >
              Please ensure your number is between 10-11
            </small>
          </div>
        </div>
        <div class="">
          <input
            type="string"
            placeholder="hobby"
            class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
            formControlName="hobby"
          />
          <div
            *ngIf="
              userForm.controls.hobby.invalid &&
              (userForm.controls.hobby.touched || userForm.controls.hobby.dirty)
            "
          >
            <small
              class="text-red-400 text-left"
              *ngIf="userForm.controls.hobby.errors?.['required']"
            >
              Please enter your hobby</small
            >
          </div>
        </div>
        <div class="">
          <div formArrayName="skillSets">
            <div
              *ngFor="let skillSet of skillSets.controls; let i = index"
              formGroupName="{{ i }}"
              class="flex flex-row gap-4 pt-2"
            >
              <input
                type="string"
                placeholder="skill"
                class="border border-gray-300 rounded-lg w-full p-2 font-[Lato] text-sm"
                formControlName="title"
              />
              <button
                class="rounded-lg text-white px-3 py-2"
                [ngClass]="{
                  'bg-red-500': i > 0 || skillSets.length > 1,
                  'bg-gray-400': i == 0 && skillSets.length == 1
                }"
                (click)="removeSkillSet(i)"
                [disabled]="i == 0 && skillSets.length == 1"
              >
                Delete
              </button>
            </div>
            <button
              type="button"
              class="underline pt-2 text-sm cursor-pointer"
              *ngIf="skillSets.length < 5"
              (click)="addSkillSet()"
            >
              Add more skill
            </button>
          </div>
        </div>
      </div>
      <div
        *ngIf="errorMessage"
        class="px-3 py-2 mt-2 rounded bg-red-300 text-red-500"
      >
        {{ errorMessage }}
      </div>
      <div class="space-x-5 pt-5">
        <button
          class="border rounded-lg px-3 py-2"
          (click)="onClose()"
          [ngClass]="{
            'bg-gray-400 cursor-progress text-white': isLoading,
            'border-red-600 text-red-600 hover:text-white hover:bg-red-600 text-sm':
              !isLoading
          }"
          [disabled]="isLoading"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="border rounded-lg text-white px-3 py-2 text-sm"
          [ngClass]="{
            'bg-gray-400 cursor-progress': !userForm.valid || isLoading,
            'bg-green-600': userForm.valid && !isLoading
          }"
          [disabled]="!userForm.valid || isLoading"
        >
          Save
        </button>
      </div>
    </form>
  </div>
</div>
